# sniproxy example configuration file
# lines that start with # are comments
# lines with only white space are ignored

user daemon

# PID file
pidfile /var/run/sniproxy.pid

error_log {
    # Log to the daemon syslog facility
    syslog daemon

    # Alternatively we could log to file
    #filename /var/log/sniproxy/sniproxy.log

    # Control the verbosity of the log
    priority notice
}

# blocks are delimited with {...}
listen 80 {
    proto http
    table http_hosts
    # Fallback backend server to use if we can not parse the client request
    fallback localhost:8080

    access_log {
        filename /var/log/sniproxy/http_access.log
        priority notice
    }
}

listen 443 {
    proto tls
    table https_hosts

    access_log {
        filename /var/log/sniproxy/https_access.log
        priority notice
    }
}

# named tables are defined with the table directive
table http_hosts {
    (.*.|)dmm.com$ *
    (.*.|)touken-ranbu.jp$ *
    (.*.|)dmmgames.com$ *
    (.*.|)wikiwiki.jp$ *
}

# named tables are defined with the table directive
table https_hosts {
    (.*.|)google.com$ *
    (.*.|)google.com.hk$ *
    (.*.|)gstatic.com$ *
    (.*.|)googleapis.com$ *
    (.*.|)googleusercontent.com$ *
    (.*.|)ggpht.com$ *
    (.*.|)youtube.com$ *
    (.*.|)ytimg.com$ *
    (.*.|)tumblr.com$ *
    (.*.|)dmm.com$ *
}

# if no table specified the default 'default' table is defined
table {
    # if no port is specified default HTTP (80) and HTTPS (443) ports are
    # assumed based on the protocol of the listen block using this table
    example.com 192.0.2.10
    example.net 192.0.2.20
}
